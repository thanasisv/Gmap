<!DOCTYPE html>
<html>
<head>
    <title>Αναζήτηση στο KML και άνοιγμα στο Google Maps</title>
    <script>
        function searchAndOpenOnGoogleMaps() {
            var kmlUrl = 'https://thanasisv.github.io/kml/KML%20FOR%20NAVIGATOR.kml';
            var addressToSearch = document.getElementById('addressInput').value;

            if (!addressToSearch) {
                alert('Παρακαλώ εισάγετε μια διεύθυνση για αναζήτηση.');
                return;
            }

            fetch(kmlUrl)
                .then(response => response.text())
                .then(kmlData => {
                    var parser = new DOMParser();
                    var xmlDoc = parser.parseFromString(kmlData, 'application/xml');
                    var coordinates = findCoordinatesByAddress(xmlDoc, addressToSearch);

                    if (coordinates) {
                        var mapsUrl = 'https://www.google.com/maps?q=' + coordinates.lat + ',' + coordinates.lng + '&kml=' + kmlUrl;
                        window.location.href = mapsUrl;
                    } else {
                        alert('Δεν βρέθηκαν αποτελέσματα για τη διεύθυνση: ' + addressToSearch);
                    }
                })
                .catch(error => {
                    console.error('Σφάλμα κατά την ανάγνωση του KML: ', error);
                });
        }

        function findCoordinatesByAddress(xmlDoc, address) {
            var placemarks = xmlDoc.querySelectorAll('Placemark');
            for (var i = 0; i < placemarks.length; i++) {
                var placemark = placemarks[i];
                var description = placemark.querySelector('description').textContent;

                if (description.includes(address)) {
                    var coordinates = placemark.querySelector('coordinates').textContent.split(',');
                    return { lat: parseFloat(coordinates[1]), lng: parseFloat(coordinates[0]) };
                }
            }
            return null;
        }
    </script>
</head>
<body>
    <h1>Αναζήτηση στο KML και άνοιγμα στο Google Maps</h1>
    <label for="addressInput">Διεύθυνση:</label>
    <input type="text" id="addressInput">
    <button onclick="searchAndOpenOnGoogleMaps()">Αναζήτηση</button>
</body>
</html>
